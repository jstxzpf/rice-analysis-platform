# Rice Analysis Platform

本项目为水稻分析平台，包含前后端及相关服务，支持田间数据采集、分析与可视化。

## 目录结构

- `backend/`：后端服务（Python FastAPI，Celery，数据库等）
- `frontend/`：前端项目（Vue3 + Vite）
- `nginx/`：Nginx 配置
- `uploads/`：上传文件目录
- `docker-compose.yml`：一键部署配置
- `design.md`：设计文档
- `GEMINI.md`：Gemini 相关说明

## 快速开始

### 1. 克隆仓库
```bash
git clone https://github.com/jstxzpf/rice-analysis-platform.git
cd rice-analysis-platform
```

### 2. 后端环境
```bash
cd backend
pip install -r requirements.txt
# 启动 FastAPI 服务
python -m app.main
```

### 3. 前端环境
```bash
cd frontend
npm install
npm run dev
```

### 4. 其他
- 可使用 `docker-compose up` 一键启动所有服务
- 详细部署与开发说明请见各目录下 README 或文档

## 贡献

## 系统功能说明

### 1. 用户与权限管理
- 用户注册、登录，基于JWT的安全认证。
- 支持多角色（如普通用户、管理员）。
- 用户可管理自己的田块、数据和分析结果。

### 2. 田块管理
- 新增、编辑、删除田块信息（如名称、位置、面积、品种、种植日期等）。
- 支持多田块管理，便于大规模田间实验。

### 3. 数据上传与分析任务
- 支持每个田块多时点的图像采集（无人机俯拍、0.5米侧拍、3米侧拍）。
- 一次上传三张图片，自动归档并触发分析任务。
- Celery异步任务队列，分析任务不阻塞主流程。
- 实时查询分析任务状态（PENDING/PROCESSING/COMPLETED/FAILED）。

### 4. 图像智能分析引擎
- 覆盖度分析：基于颜色分割和指数算法，自动计算冠层覆盖度。
- 株高测量：通过白板标定和图像分割，自动测量平均株高及整齐度。
- 冠层颜色与均匀度：提取冠层颜色指数、均匀度变异系数等关键指标。
- 分蘖密度估算：基于形态学和轮廓分析，估算分蘖密度。
- 分析结果自动写入数据库，支持后续趋势分析。

### 5. 结果与趋势可视化
- 历史分析结果列表与单次详细报告（含原图、分析数据、可视化图表）。
- 关键指标（如株高、覆盖度、颜色指数等）趋势折线图，支持多田块对比。
- 地图展示所有田块及其最新状态。

### 6. API接口
- RESTful风格，基于FastAPI，自动生成交互式文档。
- 主要端点包括：用户认证、田块管理、图片上传、任务状态、结果查询、趋势分析等。

### 7. 前端主要页面
- 登录/注册页：用户身份认证。
- 仪表盘（Dashboard）：地图、关键指标总览。
- 田块管理页：田块增删改查。
- 田块详情页：历史分析记录、趋势图。
- 数据上传页：图片上传与任务进度。
- 分析报告页：单次分析结果展示。
- 趋势分析页：多指标时间序列可视化。

### 8. 部署与运维
- 支持本地开发与Docker一键部署。
- Nginx反向代理，静态资源与API分离。
- 详细的环境变量和配置说明。

---
更多详细设计、数据结构和开发任务请见 `design.md`。

---
欢迎 issue、PR 与建议！

## License
MIT
